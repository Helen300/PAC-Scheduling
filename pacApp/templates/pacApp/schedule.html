<!DOCTYPE html>
 <html>
   <div>
      <title>PrincetonDance.com</title>
      <link rel="stylesheet" href="/static/pacApp/assets/css/schedule.css">
      <link rel="stylesheet" href="static/pacApp/assets/css/table.css" />
      <link rel="stylesheet" href="static/pacApp/assets/css/main.css" />
      <script src="/static/pacApp/assets/js/input.js"></script> 
      <script src="/static/pacApp/assets/js/schedule.js"></script> 

      </div>
   <div>
      <!-- tabs for all of the days of the week --> 
      {% include 'templates/pacApp/tableElements/daystab.html' %}
      

      <div id="myModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content">
          <span class="close">&times;</span>
            {% include 'templates/pacApp/bookForm.html' %}
          <button id='confirm' onclick="sendbook(this.value)" style="float:right;padding:15px">Confirm</button>
        </div>
      </div>

   </div>
   
   <!-- importing jquery library --> 
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

   <script>
         function activateDay()
         {  // getting today's date 
            let today = new Date();
            // getting the day of week for today
            // returned as integers, 0 = sunday, 6 = saturday
            let todayDay = today.getDay();
            // creating the id descriptor
            let selectTab = '#d' + todayDay;
            // adding a class to element with id d(todayDay)
            $(selectTab).addClass('today');
            // activate it by clicking on this element 
            $(selectTab).click();
         }

         function setup()
         {  // on input event, handle and calls getResults
            activateDay();

         }
         $('document').ready(setup);
   </script>

   <script type="text/javascript">
   // for each booking in wilcox, we make it a object here
   // each object will also be within this list 
    var wilcox = [
    // we passed in a context argument which is a list containing
    // an element called 'Wilcox'
    // Wilcox value is a list of bookings 
    {% for booking in Wilcox %}
        { // for each of the booking, create a new object booking with such fields
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"wilcox",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];


    var bloomberg = [
    {% for booking in Bloomberg %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"bloomberg",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

  var dilliondance = [
    {% for booking in DillionDance %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"dilliondance",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

   var dillionmpr = [
    {% for booking in DillionMPR %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"dillionmpr",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

   var roberts = [
    {% for booking in Roberts %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"roberts",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

   var murphy = [
    {% for booking in Murphy %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"murphy",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

    var ns = [
    {% for booking in NewSouth %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"ns",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

    var forbes = [
    {% for booking in Forbes %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"forbes",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];

    var ellie = [
    {% for booking in Ellie %}
        {
         company_name:"{{booking.company_name}}",
         start_time:"{{booking.start_time}}",
         end_time:"{{booking.end_time}}",
         studio:"ellie",
         week_day:"{{booking.week_day}}"
        },
    {% endfor %}
   ];


   // prints - just for testing 
   //console.log(wilcox);
   //console.log(bloomberg);
  
   // for each of the studio we call function called createBooking
   wilcox.forEach(createBooking);
   bloomberg.forEach(createBooking);
   dilliondance.forEach(createBooking);
   dillionmpr.forEach(createBooking);
   roberts.forEach(createBooking);
   murphy.forEach(createBooking);
   ns.forEach(createBooking);
   forbes.forEach(createBooking);
   ellie.forEach(createBooking);
   // here is the function createBooking defined 
   function createBooking(item, index) {

      for (let i = item.start_time; i != item.end_time; i++) {
         // ex. wilcox5
         console.log(item.studio)
         // creating a specified id that we already had in place 
         let col = '#' + String(item.studio + i + item.week_day);
         console.log(col)
         // for that element with particular id, add a class called test 
         let group = item.company_name;
         $(col).addClass('helen');
         $(col).addClass(group);
         $(col).html(item.company_name);
         // don't allow it to be bookable 
         $(col).attr('onclick','');
      }  
   }

   </script>


   </div>
 </html>
